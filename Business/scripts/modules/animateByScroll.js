import{elementsIsExist}from"./general.js";export default class AnimateByScroll{constructor(e,...t){if(AnimateByScroll.repeatingAnimations=e.repeatingAnimations,t.length<=0)console.log("[AnimateByScroll] No elements have been created.");else{AnimateByScroll.elements=t,this.checkAndToggleAnimationForElements();for(let e of AnimateByScroll.elements)e.mediaQueries.length>0&&e.setMediaProperties();window.addEventListener("scroll",(()=>{this.checkAndToggleAnimationForElements()}),!1),window.addEventListener("resize",(()=>{for(let e of AnimateByScroll.elements)e.setMediaProperties()}),!1)}}checkAndToggleAnimationForElements(){window.requestAnimationFrame((()=>{for(let e of AnimateByScroll.elements)this.isPartiallyVisible(e)&&!e.htmlElement.classList.contains(AnimateByScroll.activeAnimationClass)?setTimeout((()=>{e.htmlElement.classList.add(AnimateByScroll.activeAnimationClass)}),e.timeoutBeforeStart):!this.isPartiallyVisible(e)&&AnimateByScroll.repeatingAnimations&&e.htmlElement.classList.remove(AnimateByScroll.activeAnimationClass)}))}isPartiallyVisible(e){var t=e.htmlElement.getBoundingClientRect(),i=t.top,o=t.bottom;let n=t.height*e.animStartCoeff;return i+n>=0&&n+window.innerHeight>=o}}AnimateByScroll.repeatingAnimations=!1,AnimateByScroll.activeAnimationClass="active";export class AnimationElement{constructor(e,...t){0==elementsIsExist(e.selector)?console.log("[AnimationElement] Element is not exist!"):(e.animateStartCoeff<=0||e.animateStartCoeff>1)&&console.log("[AnimationElement] AnimateStartCoeff <= 0 or > 1"),this.timeoutBeforeStart=e.timeoutBeforeStart,this.htmlElement=document.querySelector(e.selector),this.animStartCoeff=e.animateStartCoeff,this.defTimeoutBeforeStart=e.timeoutBeforeStart,this.defAnimStartCoeff=e.animateStartCoeff,this.mediaQueries=t}setMediaProperties(){for(let e of this.mediaQueries)window.innerWidth<=e.activeWitdh?(this.animStartCoeff=e.animateStartCoeff,this.timeoutBeforeStart=e.timeoutBeforeStart):(this.animStartCoeff=this.defAnimStartCoeff,this.timeoutBeforeStart=this.defTimeoutBeforeStart)}}export class AnimationMediaQuery{constructor(e,t,i){(t<=0||t>1)&&console.log("[AnimationMediaQuery] AnimateStartCoeff <= 0 or > 1"),this.activeWitdh=e,this.animateStartCoeff=t,this.timeoutBeforeStart=i}}